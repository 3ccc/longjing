!function (n, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define("longjing", [], t) : "object" == typeof exports ? exports.longjing = t() : n.longjing = t()
}(window, function () {
    return function (n) {
        var t = {};

        function e(r) {
            if (t[r])return t[r].exports;
            var o = t[r] = {i: r, l: !1, exports: {}};
            return n[r].call(o.exports, o, o.exports, e), o.l = !0, o.exports
        }

        return e.m = n, e.c = t, e.d = function (n, t, r) {
            e.o(n, t) || Object.defineProperty(n, t, {configurable: !1, enumerable: !0, get: r})
        }, e.r = function (n) {
            Object.defineProperty(n, "__esModule", {value: !0})
        }, e.n = function (n) {
            var t = n && n.__esModule ? function () {
                return n.default
            } : function () {
                return n
            };
            return e.d(t, "a", t), t
        }, e.o = function (n, t) {
            return Object.prototype.hasOwnProperty.call(n, t)
        }, e.p = "", e(e.s = 1)
    }([function (n, t) {
        var e, r, o;
        window.ljTsEventAction = {}, window.onTsEvent = function () {
            var n;
            switch (arguments.length) {
                case 1:
                    n = JSON.parse(arguments[0]), "function" == typeof ljTsEventAction[n.fn] && ljTsEventAction[n.fn](n.data);
                    break;
                case 2:
                    "function" == typeof ljTsEventAction[arguments[0]] && ljTsEventAction[arguments[0]](arguments[1])
            }
        }, n.exports = (e = function (n, t) {
            return t ? JSON.stringify({fn: n, data: t}) : JSON.stringify({fn: n})
        }, r = function () {
            var n = arguments[0], t = "object" == typeof arguments[1] ? arguments[1] : null, r = null;
            if ("object" == typeof arguments[1] ? !0 === arguments[2] : !0 === arguments[1])try {
                return void 0 !== (r = JSON.parse(window.tianshan.invokeApp(e(n, t)))).code && 0 == r.code ? r.data || {} : r
            } catch (o) {
                return console.log(e(n, t), "tianshan return data is not json format", o), r
            } else try {
                window.tianshan.invokeApp(e(n, t))
            } catch (r) {
                console.log("app run function has error", e(n, t), r)
            }
        }, o = {
            test: function () {
                return "driver is ok"
            }, getAppID: function () {
                return r("getAppId", !0)
            }, getPageType: function () {
                return r("getPageType", !0)
            }, restart: function () {
                r("restart")
            }, upgrade: function (n) {
                r("upgrade", n)
            }, open: function (n) {
                r("open", n)
            }, quit: function () {
                r("quit")
            }, readFile: function (n) {
                return r("readFile", n, !0)
            }, readConfig: function () {
                return r("readConfig", !0)
            }, writeConfig: function (n) {
                r("writeFile", n)
            }
        }, function (n, t) {
            return o[n] ? "function" == typeof o[n] ? o[n](t) : o[n] : t ? (t.callback && t.callback(t), t.callbackFn && t.callbackFn(t), void(t.fn && t.fn(t))) : null
        })
    }, function (n, t, e) {
        let r = e(0), o = {
            getDeviceNumber: function () {
                return this.get().clientNumber || null
            }, getSellerId: function () {
                return this.get().sellerId || null
            }, getPointNo: function () {
                return this.get().pointNo || null
            }, get: function () {
                var n = r("readFile", {path: "sys/client.json"}) || {}, t = {};
                try {
                    t = JSON.parse(n.content)
                } catch (e) {
                    t = n.content || {}
                }
                return t
            }
        }, i = r("getAppID"), u = {
            test: function () {
                return "hello world"
            }, config: function () {
                var n = function () {
                    var n = t(), e = arguments[0];
                    if ("object" == typeof e)for (var o in e)n[o] = e[o]; else n[e] = arguments[1];
                    r("writeConfig", {content: JSON.stringify(n)})
                }, t = function (n) {
                    var t = r("readConfig") || {}, e = {};
                    try {
                        e = JSON.parse(t).content
                    } catch (n) {
                        e = t.content || {}
                    }
                    if (n)switch (n) {
                        case"deviceNumber":
                            return o.getDeviceNumber();
                        case"sellerId":
                            return o.getSellerId();
                        case"pointNo":
                            return o.getPointNo();
                        case"appid":
                            return i;
                        default:
                            return e[n] || null
                    }
                    return e
                };
                switch (arguments.length) {
                    case 2:
                        n(arguments[0], arguments[1]);
                        break;
                    case 1:
                        if ("object" == typeof arguments[0] && n(arguments[0]), "string" == typeof arguments[0])return t(arguments[0]);
                        break;
                    case 0:
                        return t()
                }
            }, open: function (n) {
                r("open", {url: n.path})
            }, quit: function () {
                r("quit")
            }, refresh: function (n) {
                r("refresh", {path: n})
            }, upgrade: function (n) {
                r("upgrade", {url: n.url}), this.ts("upgradeResult", function () {
                    r("restart")
                })
            }, ts: function (n, t, e) {
                ljTsEventAction[n] = function (n) {
                    t && t(n, e)
                }
            }, ready: function (n) {
                n()
            }
        };
        n.exports = u
    }])
});